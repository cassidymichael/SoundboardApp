<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:settings="clr-namespace:Soundboard.Models.Settings">

    <!-- Toggle Switch Style for ToggleButton -->
    <Style x:Key="ToggleSwitchStyle" TargetType="ToggleButton">
        <Setter Property="Width" Value="44"/>
        <Setter Property="Height" Value="22"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Border x:Name="track"
                            CornerRadius="11"
                            Background="{StaticResource GrayBrush}"
                            Width="44" Height="22">
                        <Ellipse x:Name="thumb"
                                 Width="18" Height="18"
                                 Fill="White"
                                 HorizontalAlignment="Left"
                                 Margin="2,0,0,0"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="track" Property="Background" Value="{StaticResource PrimaryBrush}"/>
                            <Setter TargetName="thumb" Property="HorizontalAlignment" Value="Right"/>
                            <Setter TargetName="thumb" Property="Margin" Value="0,0,2,0"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="track" Property="Opacity" Value="0.9"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Toggle Setting Template -->
    <DataTemplate DataType="{x:Type settings:ToggleSetting}">
        <Grid Margin="0,0,0,16" Opacity="{Binding IsEnabled, Converter={StaticResource BoolToOpacityConverter}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                <TextBlock Text="{Binding Title}"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource PrimaryTextBrush}"/>
                <TextBlock Text="{Binding Description}"
                           FontSize="11"
                           Foreground="{StaticResource SecondaryTextBrush}"
                           TextWrapping="Wrap"
                           Margin="0,2,0,0"
                           Visibility="{Binding Description, Converter={StaticResource NullToVisibilityConverter}}"/>
            </StackPanel>
            <ToggleButton Grid.Column="1"
                          IsChecked="{Binding Value}"
                          IsEnabled="{Binding IsEnabled}"
                          Style="{StaticResource ToggleSwitchStyle}"
                          VerticalAlignment="Center"
                          Margin="16,0,0,0"/>
        </Grid>
    </DataTemplate>

    <!-- Slider Setting Template -->
    <DataTemplate DataType="{x:Type settings:SliderSetting}">
        <StackPanel Margin="0,0,0,16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Title}"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource PrimaryTextBrush}"/>
                <TextBlock Grid.Column="1"
                           Text="{Binding FormattedValue}"
                           Foreground="{StaticResource SecondaryTextBrush}"
                           MinWidth="40"
                           TextAlignment="Right"/>
            </Grid>
            <TextBlock Text="{Binding Description}"
                       FontSize="11"
                       Foreground="{StaticResource SecondaryTextBrush}"
                       TextWrapping="Wrap"
                       Margin="0,2,0,0"
                       Visibility="{Binding Description, Converter={StaticResource NullToVisibilityConverter}}"/>
            <Slider Minimum="{Binding Minimum}"
                    Maximum="{Binding Maximum}"
                    Value="{Binding Value}"
                    SmallChange="{Binding Step}"
                    LargeChange="{Binding Step}"
                    Margin="0,8,0,0"/>
        </StackPanel>
    </DataTemplate>

    <!-- Action Setting Template -->
    <DataTemplate DataType="{x:Type settings:ActionSetting}">
        <StackPanel Margin="0,0,0,16">
            <TextBlock Text="{Binding Title}"
                       FontWeight="SemiBold"
                       Foreground="{StaticResource PrimaryTextBrush}"/>
            <TextBlock Text="{Binding Description}"
                       FontSize="11"
                       Foreground="{StaticResource SecondaryTextBrush}"
                       TextWrapping="Wrap"
                       Margin="0,2,0,0"
                       Visibility="{Binding Description, Converter={StaticResource NullToVisibilityConverter}}"/>
            <Button Content="{Binding ButtonText}"
                    Command="{Binding ExecuteCommand}"
                    IsEnabled="{Binding IsExecuting, Converter={StaticResource InverseBoolConverter}}"
                    HorizontalAlignment="Left"
                    Margin="0,8,0,0"/>
        </StackPanel>
    </DataTemplate>

    <!-- Choice Setting Template (Dropdown) -->
    <DataTemplate DataType="{x:Type settings:ChoiceSettingBase}">
        <StackPanel Margin="0,0,0,16">
            <TextBlock Text="{Binding Title}"
                       FontWeight="SemiBold"
                       Foreground="{StaticResource PrimaryTextBrush}"/>
            <TextBlock Text="{Binding Description}"
                       FontSize="11"
                       Foreground="{StaticResource SecondaryTextBrush}"
                       TextWrapping="Wrap"
                       Margin="0,2,0,0"
                       Visibility="{Binding Description, Converter={StaticResource NullToVisibilityConverter}}"/>
            <ComboBox ItemsSource="{Binding OptionsSource}"
                      SelectedItem="{Binding SelectedItem}"
                      Margin="0,8,0,0"
                      MinWidth="200"
                      HorizontalAlignment="Left"/>
        </StackPanel>
    </DataTemplate>

    <!-- Hotkey Setting Template -->
    <DataTemplate DataType="{x:Type settings:HotkeySetting}">
        <StackPanel Margin="0,0,0,16">
            <TextBlock Text="{Binding Title}"
                       FontWeight="SemiBold"
                       Foreground="{StaticResource PrimaryTextBrush}"/>
            <TextBlock Text="{Binding Description}"
                       FontSize="11"
                       Foreground="{StaticResource SecondaryTextBrush}"
                       TextWrapping="Wrap"
                       Margin="0,2,0,0"
                       Visibility="{Binding Description, Converter={StaticResource NullToVisibilityConverter}}"/>
            <Grid Margin="0,8,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" MaxWidth="200"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox Text="{Binding DisplayValue, Mode=OneWay}"
                         IsReadOnly="True"
                         VerticalContentAlignment="Center"/>
                <Button Grid.Column="1"
                        Content="{Binding LearnButtonText}"
                        Command="{Binding ToggleLearnCommand}"
                        Margin="4,0,0,0"
                        MinWidth="60"/>
                <Button Grid.Column="2"
                        Content="Clear"
                        Command="{Binding ClearCommand}"
                        Margin="4,0,0,0"/>
            </Grid>
        </StackPanel>
    </DataTemplate>

    <!-- Category List Item Template -->
    <DataTemplate x:Key="CategoryItemTemplate">
        <Border Padding="12,10" Cursor="Hand">
            <TextBlock Text="{Binding Name}"
                       FontWeight="SemiBold"
                       FontSize="13"/>
        </Border>
    </DataTemplate>

    <!-- Category ListBox Item Container Style -->
    <Style x:Key="CategoryItemContainerStyle" TargetType="ListBoxItem">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="border"
                            Background="{TemplateBinding Background}"
                            BorderThickness="3,0,0,0"
                            BorderBrush="Transparent">
                        <ContentPresenter/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="{StaticResource HoverBackgroundBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsSelected" Value="False"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" Value="{StaticResource OverlayLightBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource PrimaryTextBrush}"/>
                        </MultiTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
